---
- name: create directory for elastic search db
  file:
    path: "{{ config_volume }}/elasticsearch"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0755

- name: start elasticsearch container
  docker_container:
    name: elasticsearch
    state: started
    restart: yes
    restart_policy: always
    labels:
      traefik.enable: "false"
    image: elasticsearch:7.1.1
    ports:
      - 9200:9200
    env:
      discovery.type: single-node
    volumes:
      - "{{ config_volume }}/elasticsearch:/usr/share/elasticsearch/data"