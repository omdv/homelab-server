---
- name: create directory for traefik
  file:
    path: "{{ docker_volumes }}/traefik"
    state: directory

- name: ensure acme.json exists
  copy:
    content: ""
    dest: "{{ docker_volumes }}/traefik/acme.json"
    force: no
    mode: 0600

- name: copy traefik config
  copy:
    src: traefik.toml
    dest: "{{ docker_volumes }}/traefik/traefik.toml"
    owner: om
    group: docker
    force: yes