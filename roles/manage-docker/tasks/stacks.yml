---
- name: create persistent dir for traefik
  file:
    path: "{{ config_volume }}/traefik"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"

# - name: create empty acme.json
#   file:
#     state: touch
#     path: "{{ config_volume }}/traefik/acme.json"
#     owner: "{{ user }}"
#     group: "{{ user }}"
#     mode: 0600

# - name: create empty access.log
#   file:
#     state: touch
#     path: "{{ config_volume }}/traefik/access.log"
#     owner: "{{ user }}"
#     group: "{{ user }}"
#     mode: 0664

- name: create persistent dir for nginx
  file:
    path: "{{ config_volume }}/nginx"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0755

- name: copy static file
  copy:
    src: index.html
    dest: "{{ config_volume }}/nginx/index.html"
    owner: "{{ user }}"
    group: "{{ user }}"
    force: true
    mode: 0666

- name: create persistent dir for seafile
  file:
    path: "{{ config_volume }}/seafile"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: true

- name: create persistent dir for books config
  file:
    path: "{{ config_volume }}/books"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: true

- name: create persistent dir for calibre books storage
  file:
    path: "{{ book_volume }}"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: true

- name: create persistent dir for jupyter config
  file:
    path: "{{ config_volume }}/jupyter"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: true

- name: create persistent dir for jupyter storage
  file:
    path: "{{ jupyter_volume }}"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: true

- name: create persistent dir for hassio config
  file:
    path: "{{ config_volume }}/hassio"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: true
