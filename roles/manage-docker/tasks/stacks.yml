---
- name: create persistent dir for traefik
  file:
    path: "{{ config_volume }}/traefik"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"

- name: create empty acme.json
  file:
    state: touch
    path: "{{ config_volume }}/traefik/acme.json"
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0600

- name: create persistent dir for nginx
  file:
    path: "{{ config_volume }}/nginx"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0755

- name: copy static file
  copy:
    src: index.html
    dest: "{{ config_volume }}/nginx/index.html"
    owner: "{{ user }}"
    group: "{{ user }}"
    force: yes

- name: create persistent dir for seafile
  file:
    path: "{{ config_volume }}/seafile"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: yes

- name: create persistent dir for calibre
  file:
    path: "{{ config_volume }}/calibre"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: yes

- name: create persistent dir for books
  file:
    path: "{{ book_volume }}"
    state: directory
    owner: "{{ user }}"
    group: "{{ user }}"
  become: yes