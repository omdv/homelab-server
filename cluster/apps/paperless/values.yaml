---
paperless:
  image:
    repository: ghcr.io/paperless-ngx/paperless-ngx
    tag: 1.8@sha256:547794ae108db4f8736f767bb6186a19011c7af237ae94aa0a22188cce2ec93d
    pullPolicy: IfNotPresent

  envFrom:
    - secretRef:
        name: paperless-secret
  env:
    PAPERLESS_REDIS: "redis://redis-master.redis.svc.cluster.local:6379"
    PAPERLESS_DBHOST: "postgresql.postgres.svc.cluster.local"
    PAPERLESS_DBPORT: 5432
    PAPERLESS_TIME_ZONE: "America/Chicago"
    PAPERLESS_URL: "https://paperless.hut.sh"
    PAPERLESS_ALLOWED_HOSTS: "https://paperless.hut.sh"
    PAPERLESS_CORS_ALLOWED_HOSTS: "https://paperless.hut.sh"
    PAPERLESS_OCR_LANGUAGES: "eng ua ru"
    PAPERLESS_PORT: 8000

  service:
    main:
      ports:
        http:
          port: 8000

  ingress:
    main:
      enabled: false
      ingressClassName: nginx
      hosts:
        - host: paperless.hut.sh
          paths:
            - path: /
              pathType: Prefix
      annotations:
        cert-manager.io/cluster-issuer: "letsencrypt-prod"
        nginx.ingress.kubernetes.io/auth-url: "https://auth.hut.sh/oauth2/auth"
        nginx.ingress.kubernetes.io/auth-signin: "https://auth.hut.sh/oauth2/start?rd=https://$host$uri"
        hajimari.io/enable: "true"
      tls:
        - hosts:
            - paperless.hut.sh
          secretName: my-certs-paperless

  persistence:
    data:
      enabled: true
      existingClaim: pvc-paperless-data
    media:
      enabled: true
      existingClaim: pvc-paperless-media
    consume:
      enabled: true
      existingClaim: pvc-paperless-consume

  resources:
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      cpu: "2000m"
      memory: "2048Mi"
