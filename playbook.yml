---
- name: -- HOST SETUP --
  hosts: server
  roles:
    - manage-host
  vars:
    - user: om
    - zfs_cache: /dev/sda4
    - zfs_log: /dev/sda5
    - zfs_pool: pool
    - docker_machine: remote
    - psql_db_user: test
    - psql_db_name: test
    - psql_db_password: test
    - database_location: /pool/database/
    - backup_pool: /pool/backup
    - backup_repos:
      - dir: repo-derp
        user: om
        pass: "{{ lookup('env','BORG_PASSPHRASE') }}"
      - dir: repo-server
        user: root
        pass: "{{ lookup('env','HOMELAB_BORG_PASSPHRASE') }}"
  become: yes

- name: -- DOCKER SETUP--
  hosts: server
  roles:
    - manage-docker
  vars:
    - config_volume: /pool/config
    - data_volume: /pool/databases
    - media_volume: /pool/media
    - book_volume: /pool/books
    - user: om

# - name: -- LXD SETUP--
#   hosts: server
#   roles:
#     - setup-lxd

# - hosts: containers
#   tasks:
#     - name: Install vim
#       apt:
#         name: vim