---
- name: -- HOST SETUP --
  hosts: server
  roles:
    - manage-host
  vars:
    - user: om
      zfs_cache: /dev/sda4
      zfs_log: /dev/sda5
      zfs_pool: pool

- name: -- DOCKER SETUP--
  hosts: server
  roles:
    - manage-docker
  vars:
    - docker_volumes: /pool/docker

- name: generate docker certs
  hosts: server
  gather_facts: no
  become: yes
  roles:
    - role: alexinthesky.secure-docker-daemon
  vars:
    - dds_host: 0.0.0.0
    - dds_server_cert_path: /home/om/.docker
    - dds_client_cert_path: /home/om/.docker
    - dds_restart_docker: yes
  tags:
    - docker
    - certificates

# - name: -- LXD SETUP--
#   hosts: server
#   roles:
#     - setup-lxd

# - hosts: containers
#   tasks:
#     - name: Install vim
#       apt:
#         name: vim